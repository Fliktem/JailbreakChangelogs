const VALID_SORTS=["vehicle","spoiler","rim","body-color","texture","tire-sticker","tire-style","drift","hyperchrome","furniture","limited-item"];function isValidHyperChrome(e){const t=["HyperBlue","HyperDiamond","HyperGreen","HyperOrange","HyperPink","HyperPurple","HyperRed","HyperYellow","HyperShift"],n=e.replace(/\s+Level\s+\d+$/,"").toLowerCase();if(t.some((e=>e.toLowerCase()===n)))return!0;return t.some((e=>calculateNameSimilarity(n,e.toLowerCase())>.85))}function calculateNameSimilarity(e,t){const n=e.length,a=t.length,o=Array(n+1).fill().map((()=>Array(a+1).fill(0)));for(let e=0;e<=n;e++)o[e][0]=e;for(let e=0;e<=a;e++)o[0][e]=e;for(let i=1;i<=n;i++)for(let n=1;n<=a;n++){const a=e[i-1]===t[n-1]?0:1;o[i][n]=Math.min(o[i-1][n]+1,o[i][n-1]+1,o[i-1][n-1]+a)}const i=Math.max(n,a);return 1-o[n][a]/i}async function loadSimilarItemsByName(e){try{const t=await fetch("https://api3.jailbreakchangelogs.xyz/items/list");if(!t.ok)throw new Error("Failed to fetch items");const n=await t.json(),a=window.location.pathname.split("/")[2],o="hyperchrome"===a.toLowerCase(),i=o?e.replace(/\s+Level\s+\d+$/,""):e;if(o&&!isValidHyperChrome(i)){const e=document.getElementById("similar-items");return void(e&&(e.innerHTML=`\n          <div class="col-12 text-center">\n            <p class="text-muted">"${i}" is not a valid HyperChrome color</p>\n          </div>\n        `))}let s=[];if(o&&"HyperShift"!==e){const t=e.match(/Level\s+(\d+)$/),a=t?parseInt(t[1]):0,o=a>=4,i=a<4&&Math.random()<.3;if(o||i){const e=n.find((e=>"HyperShift"===e.name&&"hyperchrome"===e.type.toLowerCase()));e&&s.push(e)}}const r=n.filter((e=>{if(o&&!isValidHyperChrome(e.name))return!1;if("HyperShift"===e.name&&s.some((e=>"HyperShift"===e.name)))return!1;const t=o?e.name.replace(/\s+Level\s+\d+$/,""):e.name;return calculateNameSimilarity(i.toLowerCase(),t.toLowerCase())>(o?.4:.2)&&e.type.toLowerCase()===a.toLowerCase()})).sort(((e,t)=>{const n=o?e.name.replace(/\s+Level\s+\d+$/,""):e.name,a=o?t.name.replace(/\s+Level\s+\d+$/,""):t.name,s=calculateNameSimilarity(i.toLowerCase(),n.toLowerCase());return calculateNameSimilarity(i.toLowerCase(),a.toLowerCase())-s}));s=[...s,...r].slice(0,4);const l=document.getElementById("similar-items");if(!l)return;if(s.length>0){const e=document.querySelector(".similar-items-section");e&&(e.style.display="none"),l.innerHTML=s.map((e=>`\n        <div class="col-lg-3 col-md-6 col-6">\n          <a href="/item/${e.type.toLowerCase()}/${encodeURIComponent(e.name)}" \n             class="card h-100 text-decoration-none hover-effect">\n            <div class="card-img-wrapper position-relative h-100">\n              <div style="aspect-ratio: 16/9; overflow: hidden; border-radius: 8px; height: 100%;">\n                ${"HyperShift"===e.name&&"HyperChrome"===e.type?`\n                    <video \n                      src="/assets/images/items/hyperchromes/HyperShift.webm"\n                      class="card-img-top w-100 h-100"\n                      style="object-fit: cover; transition: transform 0.3s ease;"\n                      playsinline \n                      muted \n                      loop\n                      autoplay\n                      defaultMuted\n                      alt="${e.name}"\n                    ></video>\n                  `:`\n                    <img src="/assets/images/items/480p/${e.type.toLowerCase()}s/${e.name}.webp" \n                         class="card-img-top w-100 h-100"\n                         style="object-fit: cover; transition: transform 0.3s ease;"\n                         alt="${e.name}"\n                         onerror="this.src='https://placehold.co/2560x1440/212A31/D3D9D4?text=No+Image+Available&font=Montserrat.webp'">`}\n              </div>\n              <div class="card-overlay position-absolute bottom-0 start-0 w-100 p-2"\n                   style="background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);">\n                <h6 class="card-title mb-1 text-white">${e.name}</h6>\n                <small class="text-light">${e.type}</small>\n              </div>\n            </div>\n          </a>\n        </div>\n      `)).join("");const t=document.createElement("style");t.textContent="\n        .hover-effect:hover img {\n          transform: scale(1.05);\n        }\n        .hover-effect {\n          transition: transform 0.3s ease;\n          box-shadow: 0 4px 6px rgba(0,0,0,0.1);\n        }\n        .hover-effect:hover {\n          transform: translateY(-2px);\n          box-shadow: 0 6px 12px rgba(0,0,0,0.15);\n        }\n      ",document.head.appendChild(t)}else{l.innerHTML='\n        <div class="col-12 text-center">\n          <p class="text-muted">No similar items found</p>\n        </div>\n      ';const e=document.querySelector(".similar-items-section");e&&(e.style.display="none")}}catch(e){console.error("Error loading similar items:",e);const t=document.querySelector(".similar-items-section");t&&(t.style.display="none")}}function formatDate(e){return new Date(1e3*e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}function formatChartDate(e){return new Date(1e3*e).toLocaleDateString("en-US",{month:"short",day:"numeric"})}function handleinvalidImage(){setTimeout((()=>{this.id.replace("avatar-","");const e=this.closest("li").querySelector("a").textContent;this.src=`https://ui-avatars.com/api/?background=134d64&color=fff&size=128&rounded=true&name=${encodeURIComponent(e)}&bold=true&format=svg`}),0)}function initializeDescriptionToggle(){const e=document.querySelector(".item-description"),t=document.querySelector(".read-more-btn");if(e&&t){if(!(e.scrollHeight>80))return t.style.display="none",e.classList.remove("collapsed"),void e.classList.add("expanded");t.style.display="flex",e.classList.add("collapsed"),e.classList.remove("expanded"),t.addEventListener("click",(()=>{const n=e.classList.contains("collapsed");e.classList.toggle("collapsed"),e.classList.toggle("expanded"),t.innerHTML=n?'<i class="bi bi-chevron-up"></i>Show Less':'<i class="bi bi-chevron-down"></i>Read More'}))}}document.addEventListener("DOMContentLoaded",(async()=>{function e(){$("#loading-overlay").removeClass("show")}function t(e){if(!e)return null;const t=Math.floor(Date.now()/1e3)-e,n={year:31536e3,month:2592e3,week:604800,day:86400,hour:3600,minute:60};if(t<60)return"just now";for(const[e,a]of Object.entries(n)){const n=Math.floor(t/a);if(n>=1)return`${n} ${e}${1===n?"":"s"} ago`}}const n=window.location.pathname.split("/").pop();decodeURIComponent(n).trim().replace(/\s+/g," ");function a(e){if(null==e||""===e)return 0;let t=e;return"string"==typeof e&&(t=(e=e.toLowerCase()).endsWith("m")?1e6*parseFloat(e):e.endsWith("k")?1e3*parseFloat(e):parseFloat(e)),isNaN(t)?0:t}function o(e){if(null==e||""===e)return"-";let t=e;return"string"==typeof e&&(t=(e=e.toLowerCase().replace(",",".")).endsWith("m")?1e6*parseFloat(e):e.endsWith("k")?1e3*parseFloat(e):parseFloat(e)),isNaN(t)?"-":Math.round(t).toLocaleString("en-US")}function i(e,t=!1){if(!e||"N/A"===e)return"No Value";const n=s(e);return t?n>=1e6?(n/1e6).toFixed(1)+"M":n>=1e3?(n/1e3).toFixed(1)+"K":n.toLocaleString():n.toLocaleString()}function s(e){if(!e||"N/A"===e)return 0;const t=e.toString().toLowerCase();return t.endsWith("m")?1e6*parseFloat(t):t.endsWith("k")?1e3*parseFloat(t):parseFloat(t)||0}const r={"close to none":1,low:2,medium:3,high:4,"very high":5,"n/a":0};function l(e,t){let n=0;const a=35,o=20,i=25,l=15,c=5,d=15,m=25;e.type===t.type&&(n+=a,"hyperchrome"===e.type.toLowerCase()&&(n+=m,"HyperShift"!==e.name&&"HyperShift"!==t.name||(n+=.5*m))),e.is_limited===t.is_limited&&(n+=o),e.tradable===t.tradable&&(n+=d);const p=s(e.cash_value),h=s(t.cash_value);if(p>0&&h>0){Math.abs(p-h);const e=Math.min(p,h)/Math.max(p,h);e>.9?n+=i:e>.7?n+=.8*i:e>.5?n+=.6*i:e>.3?n+=.4*i:e>.1&&(n+=.2*i)}const u=r[e.demand?.toLowerCase()||"n/a"],g=r[t.demand?.toLowerCase()||"n/a"];if(u>0&&g>0){const e=Math.abs(u-g);0===e?n+=l:1===e?n+=.7*l:2===e&&(n+=.4*l)}if(e.notes&&t.notes&&"N/A"!==e.notes&&"N/A"!==t.notes){const a=new Set(e.notes.toLowerCase().split(/\s+/)),o=new Set(t.notes.toLowerCase().split(/\s+/)),i=[...a].filter((e=>o.has(e)));i.length>0&&(n+=c*(i.length/Math.max(a.size,o.size)))}return n}window.handleimage=function(e){"hypershift-video"===e.id||"HyperShift"===e.alt&&e.closest(".media-container").querySelector("video")||(e.src="https://placehold.co/2560x1440/212A31/D3D9D4?text=No+Image+Available&font=Montserrat.webp")},async function(){$("#loading-overlay").addClass("show");try{const e=window.location.pathname.split("/"),n=e[2],s=e.pop(),r=decodeURIComponent(s).trim().replace(/\s+/g," ");if(!n||!r)throw new Error("Invalid URL format");const c=await fetch(`https://api3.jailbreakchangelogs.xyz/items/get?name=${encodeURIComponent(r)}&type=${n}`,{headers:{"Content-Type":"application/json",Origin:"https://jailbreakchangelogs.xyz"}});if(!c.ok)throw new Error("Item not found");const d=await c.json();if(!d||d.error||!d.type)throw new Error("Invalid item data received");!function(e){const n=e.type.toLowerCase();"Vehicle"===e.type&&(color="#c82c2c");"Spoiler"===e.type&&(color="#C18800");"Rim"===e.type&&(color="#6335B1");"Tire Sticker"===e.type&&(color="#1CA1BD");"Tire Style"===e.type&&(color="#4CAF50");"Drift"===e.type&&(color="#FF4500");"Body Color"===e.type&&(color="#8A2BE2");"Texture"===e.type&&(color="#708090");"HyperChrome"===e.type&&(color="#E91E63");"Furniture"===e.type&&(color="#9C6644");let s="",r="";"HyperChrome"===e.type?r='\n        <span class="hyperchrome-badge" style="position: static; color: black; margin-left: 12px;">\n         HyperChrome\n        </span>\n      ':(r=`\n        <span class="badge" \n              style="background-color: ${color};\n                    font-weight: 600;\n                    padding: 8px 16px;\n                    font-size: 1rem;\n                    letter-spacing: 0.5px;\n                    border-radius: 20px;">\n            ${e.type}\n        </span>\n      `,e.is_limited&&(s='\n          <span class="badge limited-badge">\n            <i class="bi bi-star-fill me-1"></i>Limited\n          </span>\n        '));const c=document.getElementById("item-container");let d;d="Drift"===e.type?`\n    <div class="media-container ${e.is_limited?"limited-item":""}">\n        <video \n          src="/assets/images/items/drifts/${e.name}.webm"\n          class="img-fluid rounded video-player"\n          playsinline \n          muted \n          loop\n          autoplay\n          defaultMuted\n          style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: contain; opacity: 1;"\n        ></video>\n        ${e.is_limited?s:""}\n    </div>\n  `:"HyperChrome"===e.type&&"HyperShift"===e.name?`\n      <div class="media-container ${e.is_limited?"limited-item":""}">\n          <div class="skeleton-loader"></div>\n          <video \n              src="/assets/images/items/hyperchromes/HyperShift.webm"\n              class="video-player card-img-top"\n              playsinline \n              muted \n              loop\n              autoplay\n              id="hypershift-video"\n              onloadeddata="this.parentElement.querySelector('.skeleton-loader').style.display='none'; this.style.opacity='1'"\n              onerror="handleimage(this)"\n              style="width: 100%; height: 100%; object-fit: contain; opacity: 0; transition: opacity 0.3s ease;"\n          ></video>\n      </div>\n  `:`\n        <div class="media-container ${e.is_limited?"limited-item":""}">\n          <img \n            src="/assets/images/items/${encodeURIComponent(n)}/${e.name}s.webp"\n            class="img-fluid rounded thumbnail"\n            alt="${e.name}"\n            onerror="handleimage(this)"\n          >\n          ${e.is_limited?s:""}\n        </div>\n      `;const m=o(e.cash_value),p=o(e.duped_value),h=window.location.pathname.split("/"),u=(h[2],e.type),g="-"!==m||"-"!==p;function v(e){if(!e)return null;const t=e.split(",").filter((e=>e.trim())).filter((e=>"N/A"!==e.trim()));return t.length?{count:t.length,list:t}:null}async function y(e){try{const n=await fetch("https://api3.jailbreakchangelogs.xyz/items/list"),a=await n.json();let o=[];if("hyperchrome"===e.type.toLowerCase()&&"HyperShift"!==e.name){const t=e.name.match(/Level [45]$/),n=Math.random()<.3;if(t||n){const e=a.find((e=>"HyperShift"===e.name&&"hyperchrome"===e.type.toLowerCase()));e&&o.push({...e,similarityScore:999})}}const s=a.filter((t=>t.id!==e.id&&!("HyperShift"===t.name&&"hyperchrome"===t.type.toLowerCase()))).map((t=>({...t,similarityScore:l(e,t)}))).sort(((e,t)=>t.similarityScore-e.similarityScore));o=[...o,...s].slice(0,4);const r=document.getElementById("similar-items");r.innerHTML="",o.forEach((e=>{const n=document.createElement("div");n.className="col-lg-3 col-md-3 col-12",n.innerHTML=`\n          <a href="/item/${e.type}/${encodeURIComponent(e.name)}" \n            class="text-decoration-none similar-item-card">\n            <div class="card h-100">\n              <div class="card-img-wrapper position-relative" style="aspect-ratio: 16/9;">\n                ${"HyperShift"===e.name&&"HyperChrome"===e.type?`\n                    <video \n                      src="/assets/images/items/hyperchromes/HyperShift.webm"\n                      class="card-img-top" \n                      style="width: 100%; height: 100%; object-fit: cover;"\n                      playsinline \n                      muted \n                      loop\n                      autoplay\n                      defaultMuted\n                      alt="${e.name}"\n                    ></video>\n                  `:`\n                    <img src="/assets/images/items/480p/${e.type.toLowerCase()}s/${e.name}.webp" \n                         class="card-img-top" \n                         alt="${e.name}"\n                         onerror="this.src='https://placehold.co/2560x1440/212A31/D3D9D4?text=No+Image+Available&font=Montserrat.webp'">`}\n                  ${e.similarityScore>75?'<span class="badge bg-success position-absolute top-0 end-0 m-2 best-match-badge">Best Match</span>':""}\n                </div>\n                <div class="card-body d-flex flex-column">\n                  <h5 class="card-title text-truncate mb-2">${e.name}</h5>\n                  <div class="value-display">\n                    <div class="mb-2">\n                      <small class="text-muted d-block">Cash Value:</small>\n                      <p class="card-text mb-1 desktop-value" style="color: var(--accent-color-light)">\n                        ${i(e.cash_value,!1)}\n                      </p>\n                      <p class="card-text mb-1 mobile-value d-none" style="color: var(--accent-color-light)">\n                        ${i(e.cash_value,!0)}\n                      </p>\n                    </div>\n                    <div class="mb-2">\n                      <small class="text-muted d-block">Duped Value:</small>\n                      <p class="card-text mb-1 desktop-value ${e.duped_value?"text-warning":""}">\n                        ${i(e.duped_value,!1)}\n                      </p>\n                      <p class="card-text mb-1 mobile-value d-none ${e.duped_value?"text-warning":""}">\n                        ${i(e.duped_value,!0)}\n                      </p>\n                    </div>\n                  </div>\n                  ${e.is_limited?'<span class="badge limited-badge"><i class="bi bi-star-fill me-1"></i>Limited</span>':""}\n                  <div class="mt-2">\n                    <small class="text-muted demand-tag">\n                      <i class="bi bi-graph-up-arrow me-1"></i>\n                      ${e.demand&&"N/A"!==e.demand?e.demand:"No Demand"} \n                      <span class="demand-separator mx-2">|</span>\n                      <span class="last-updated">\n                        Last updated: ${e.last_updated?t(e.last_updated):"N/A"}\n                      </span>\n                    </small>\n                  </div>\n\n                </div>\n              </div>\n            </a>\n          `,r.appendChild(n)}))}catch(e){console.error("Error loading similar items:",e)}}setTimeout((()=>{const e=document.querySelector(".media-container"),t=e.querySelector("video");if(t){new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting?t.play().catch((e=>console.log("Video play failed:",e))):t.pause()}))}),{threshold:.5}).observe(e),document.addEventListener("visibilitychange",(()=>{if(document.hidden)t.pause();else{const n=e.getBoundingClientRect();n.top<window.innerHeight&&n.bottom>0&&t.play().catch((e=>console.log("Video play failed:",e)))}}))}}),100);const f="-"!==m&&"N/A"!==m,b="-"!==p&&"N/A"!==p,w=e.demand&&"N/A"!==e.demand,x=e.notes&&"N/A"!==e.notes;w&&("'N/A'"===e.demand||"N/A"===e.demand||e.demand);function C(e){if(!e||"N/A"===e)return"No Price Data";if(e.includes("-")){const t='<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 16 16" style="vertical-align: -0.1em; margin-left: 2px;">\n          <rect width="16" height="16" fill="none" />\n          <path fill="#76ABAE" d="M16 14H2v-1h13V6h1z" />\n          <path fill="#76ABAE" d="M13 4v7H1V4zm1-1H0v9h14z" />\n          <path fill="#76ABAE" d="M3 6H2v3h1v1h4a2.5 2.5 0 1 1 0-5H3zm8 0V5H7a2.5 2.5 0 1 1 0 5h4V9h1V6z" />\n        </svg>';return e.split("-").map((e=>{if((e=e.trim()).toLowerCase().endsWith("k")){const n=1e3*parseFloat(e.toLowerCase().replace("k",""));return`${t} ${n.toLocaleString()}`}if(e.toLowerCase().endsWith("m")){const n=1e6*parseFloat(e.toLowerCase().replace("m",""));return`${t} ${n.toLocaleString()}`}return`${t} ${parseFloat(e).toLocaleString()}`})).join(" - ")}if(e.includes("/")){const[t,n]=e.split("/").map((e=>e.trim()));if("free"===t.toLowerCase()&&n.toLowerCase().includes("robux")){return`Free / <img src="/assets/Robux.png" alt="Robux" style="height: 1em; vertical-align: -0.1em; margin-left: 2px;"> ${n.replace(/[^0-9]/g,"")}`}}if("string"==typeof e){if(e.toLowerCase().includes("robux")){return`<img src="/assets/Robux.png" alt="Robux" style="height: 1em; vertical-align: -0.1em; margin-left: 2px;"> ${e.replace(/[^0-9]/g,"")}`}const t=e.toLowerCase();if(t.endsWith("k")){return`<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 16 16" style="vertical-align: -0.1em; margin-left: 2px;">\n        <rect width="16" height="16" fill="none" />\n        <path fill="#76ABAE" d="M16 14H2v-1h13V6h1z" />\n        <path fill="#76ABAE" d="M13 4v7H1V4zm1-1H0v9h14z" />\n        <path fill="#76ABAE" d="M3 6H2v3h1v1h4a2.5 2.5 0 1 1 0-5H3zm8 0V5H7a2.5 2.5 0 1 1 0 5h4V9h1V6z" />\n        </svg> ${(1e3*parseFloat(t.replace("k",""))).toLocaleString()}`}if(t.endsWith("m")){return`<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 16 16" style="vertical-align: -0.1em; margin-left: 2px;">\n        <rect width="16" height="16" fill="none" />\n        <path fill="#76ABAE" d="M16 14H2v-1h13V6h1z" />\n        <path fill="#76ABAE" d="M13 4v7H1V4zm1-1H0v9h14z" />\n        <path fill="#76ABAE" d="M3 6H2v3h1v1h4a2.5 2.5 0 1 1 0-5H3zm8 0V5H7a2.5 2.5 0 1 1 0 5h4V9h1V6z" />\n        </svg> ${(1e6*parseFloat(t.replace("m",""))).toLocaleString()}`}}const t=parseFloat(e.toString().replace(/[^0-9.]/g,""));return!isNaN(t)&&t>1?`<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" style="vertical-align: -0.1em; margin-left: 2px;">\n      <rect width="24" height="24" fill="none"/>\n      <path fill="#76ABAE" d="M3 6h18v12H3zm9 3a3 3 0 0 1 3 3a3 3 0 0 1-3 3a3 3 0 0 1-3-3a3 3 0 0 1 3-3M7 8a2 2 0 0 1-2 2v4a2 2 0 0 1 2 2h10a2 2 0 0 1 2-2v-4a2 2 0 0 1-2-2z"/>\n    </svg> ${t.toLocaleString()}`:e}const $="vehicle"===e.type.toLowerCase()?`\n    <div class="col-md-6 mt-3">\n      <div class="value-card p-4 rounded-3" style="background-color: rgba(116, 141, 146, 0.1); border: 1px solid rgba(116, 141, 146, 0.2);">\n        <h4 class="text-muted mb-3 d-flex align-items-center">\n          <i class="bi bi-tag-fill me-2"></i>\n          Original Price\n        </h4>\n        <p class="h2 mb-0" style="color: #76ABAE; font-weight: 600;">\n          ${C(e.price)}\n        </p>\n      </div>\n    </div>\n    `:"",L="vehicle"===e.type.toLowerCase()?`\n<div class="col-md-6 mt-3">\n  <div class="value-card p-4 rounded-3" style="background-color: rgba(116, 141, 146, 0.1); border: 1px solid rgba(116, 141, 146, 0.2);">\n    <h4 class="text-muted mb-3 d-flex align-items-center">\n      <i class="bi bi-heart-fill me-2"></i>\n      Vehicle Health\n    </h4>\n    <p class="h2 mb-0" style="color: #76ABAE; font-weight: 600;">\n      ${e.health?e.health:"No Health Data"}\n    </p>\n    <small class="text-muted mt-2 d-block">\n      If any data for health is incorrect dm \n      <a href="https://discord.com/users/1123014543891775509" \n        target="_blank" \n        rel="noopener noreferrer"\n        style="color: #76ABAE;">\n        @PikachuWolverine\n      </a> \n      on discord.\n    </small>\n  </div>\n</div>\n`:"",S=(x&&e.notes,v(e.duped_owners)),k=`\n    <div class="values-section border-top border-bottom py-4 my-4">\n      <div class="row g-4">\n        ${e.last_updated?`\n          <div class="col-12">\n            <div class="d-flex align-items-center">\n              <small class="text-muted">\n                <i class="bi bi-clock-history me-1"></i>\n                Last updated: ${t(e.last_updated)}\n              </small>\n            </div>\n          </div>\n        `:'\n          <div class="col-12">\n            <div class="d-flex align-items-center">\n              <small class="text-muted">\n                <i class="bi bi-clock-history me-1"></i>\n                Last updated: N/A\n              </small>\n            </div>\n          </div>\n        '}\n        \n       \x3c!-- Cash Value Card --\x3e\n      <div class="col-md-6">\n        <div class="value-card p-4 rounded-3" style="background-color: rgba(24, 101, 131, 0.1); border: 1px solid rgba(24, 101, 131, 0.2);">\n          <h4 class="text-muted mb-3 d-flex align-items-center">\n            <i class="bi bi-cash-stack me-2"></i>\n            Cash Value\n          </h4>\n          <p class="h2 mb-0" style="color: rgb(29, 125, 163); font-weight: 600;">\n            ${f?m:"No Cash Value"}\n          </p>\n        </div>\n      </div>\n    \n        \x3c!-- Duped Value Card with Owners --\x3e\n        <div class="col-md-6">\n          <div class="value-card p-4 rounded-3" style="background-color: rgba(116, 141, 146, 0.1); border: 1px solid rgba(116, 141, 146, 0.2);">\n            <h4 class="text-muted mb-3 d-flex align-items-center">\n              <i class="bi bi-graph-down me-2"></i>\n              Duped Value\n            </h4>\n            <p class="h2 mb-0" style="color: #748D92; font-weight: 600;">\n              ${b?p:"No Duped Value"}\n            </p>\n            ${S?`\n              <div class="mt-3 pt-3 border-top">\n                <button class="btn btn-link text-decoration-none p-0" type="button" \n                        data-bs-toggle="collapse" data-bs-target="#dupedOwnersList" \n                        aria-expanded="false" aria-controls="dupedOwnersList" \n                        style="color: #748d92;">\n                  <i class="bi bi-people-fill me-1"></i>\n                  <span class="duped-owners-count">${S.count} Known Duped Owner${1!==S.count?"s":""}</span>\n                  <i class="bi bi-chevron-down ms-1"></i>\n                </button>\n                <div class="collapse mt-3" id="dupedOwnersList">\n                  <div class="duped-owners-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 8px;">\n                    ${S.list.map((e=>`\n                      <a href="https://www.roblox.com/search/users?keyword=${encodeURIComponent(e.trim())}"\n                         target="_blank"\n                         rel="noopener noreferrer"\n                         class="duped-owner-item p-2 rounded" \n                         style="\n                           background-color: rgba(18, 78, 102, 0.2);\n                           font-size: 0.9rem;\n                           color: #d3d9d4;\n                           overflow: hidden;\n                           text-overflow: ellipsis;\n                           white-space: nowrap;\n                           text-decoration: none;\n                           transition: background-color 0.2s ease, color 0.2s ease;\n                         "\n                         onmouseover="this.style.backgroundColor='rgba(18, 78, 102, 0.4)'; this.style.color='#ffffff';"\n                         onmouseout="this.style.backgroundColor='rgba(18, 78, 102, 0.2)'; this.style.color='#d3d9d4';"\n                      >\n                        ${e.trim()}\n                      </a>\n                    `)).join("")}\n                  </div>\n                </div>\n              </div>\n            `:""}\n          </div>\n        </div>\n        \n        \x3c!-- Demand Card --\x3e\n        <div class="col-md-6 mt-3">\n          <div class="value-card p-4 rounded-3" style="background-color: rgba(116, 141, 146, 0.1); border: 1px solid rgba(116, 141, 146, 0.2);">\n            <h4 class="text-muted mb-3 d-flex align-items-center">\n              <i class="bi bi-graph-up-arrow me-2"></i>\n              Demand\n            </h4>\n            <p class="h2 mb-0" style="color: #76ABAE; font-weight: 600;">\n              ${w?e.demand:"No Demand"}\n            </p>\n          </div>\n        </div>\n    \n        \x3c!-- Notes Card --\x3e\n        <div class="col-md-6 mt-3">\n          <div class="value-card p-4 rounded-3" style="background-color: rgba(116, 141, 146, 0.1); border: 1px solid rgba(116, 141, 146, 0.2);">\n            <h4 class="text-muted mb-3 d-flex align-items-center">\n              <i class="bi bi-journal-text me-2"></i>\n              Notes\n            </h4>\n            <p class="h5 mb-0" style="color: #76ABAE; font-weight: 500; line-height: 1.4;">\n              ${x?e.notes:"No Notes"}\n            </p>\n          </div>\n        </div>\n         \x3c!-- Price Card (vehicles only) --\x3e\n      ${$}\n\n      \x3c!-- Health Card (vehicles only) --\x3e\n      ${L}\n      </div>\n    </div>\n  `,H=g?'\n      \x3c!-- Combined Graph Section --\x3e\n      <div class="row mb-4" style="padding-top: 40px;">\n        <div class="col-12">\n          <div class="card chart-container">\n            <div class="card-body">\n              <div class="chart-wrapper">\n                <div id="combinedChart"></div>\n              </div>\n              <button id="fullscreen" class="btn btn-secondary mt-2">\n                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="currentColor">\n                  <path d="M1.5 1a.5.5 0 0 0-.5.5v4a.5.5 0 0 1-1 0v-4A1.5 1.5 0 0 1 1.5 0h4a.5.5 0 0 1 0 1h-4zM10 .5a.5.5 0 0 1 .5-.5h4A1.5 1.5 0 0 1 16 1.5v4a.5.5 0 0 1-1 0v-4a.5.5 0 0 0-.5-.5h-4a.5.5 0 0 1-.5-.5zM.5 10a.5.5 0 0 1 .5.5v4a.5.5 0 0 0 .5.5h4a.5.5 0 0 1 0 1h-4A1.5 1.5 0 0 1 0 14.5v-4a.5.5 0 0 1 .5-.5zm15 0a.5.5 0 0 1 .5.5v4a1.5 1.5 0 0 1-1.5 1.5h-4a.5.5 0 0 1 0-1h4a.5.5 0 0 0 .5-.5v-4a.5.5 0 0 1 .5-.5z"/>\n                </svg>\n                Toggle Fullscreen\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>':'\n      \x3c!-- No Values Message --\x3e\n      <div class="row mb-4" style="padding-top: 40px;">\n        <div class="col-12">\n          <div class="card chart-container">\n            <div class="card-body text-center py-5">\n              <h3 style="color: #748d92; font-family: \'Luckiest Guy\', cursive;">No values available to generate graph</h3>\n              <p class="text-muted">This item currently has no recorded values</p>\n            </div>\n          </div>\n        </div>\n      </div>\n      ';if(c.innerHTML=`\n            \x3c!-- Breadcrumb Navigation --\x3e\n            <div class="container-fluid mt-1">\n                <nav aria-label="breadcrumb">\n                    <ol class="breadcrumb">\n                        <li class="breadcrumb-item"><a href="/">Home</a></li>\n                        <li class="breadcrumb-item"><a href="/values">Values</a></li>\n                      <li class="breadcrumb-item">\n                          <a href="/values?sort=${u.toLowerCase()}s&valueSort=cash-desc">\n                              ${u}s\n                          </a>\n                      </li>\n                        <li class="breadcrumb-item active" aria-current="page">${e.name}</li>\n                    </ol>\n                </nav>\n             </div>\n    \n           <div class="container-fluid mt-1">\n              <div class="media-container-wrapper">\n                  \x3c!-- Main Item Info Section --\x3e\n                  <div class="row mb-4">\n                     \x3c!-- Left Side - Image and Health --\x3e\n                    <div class="col-md-5 p-3">\n                      <div class="d-flex flex-column gap-3">\n                        ${"Drift"===e.type||"HyperShift"===e.name&&"HyperChrome"===e.type?d:`\n                          <div class="media-container ${e.is_limited?"limited-item":""}">\n                              <img \n                                  src="/assets/images/items/${encodeURIComponent(n)}s/${e.name}.webp"\n                                  class="img-fluid rounded thumbnail"\n                                  alt="${e.name}"\n                                  style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: contain;"\n                                  onerror="handleimage(this)"\n                              >\n                              ${e.is_limited?s:""}\n                          </div>\n                        `}\n                      \n                      </div>\n                    </div>\n\n                      \x3c!-- Right Side - Item Details --\x3e\n                      <div class="col-md-7 p-3">\n                          \x3c!-- Item Title and Badge Container --\x3e\n                          <div class="item-header d-flex align-items-center mb-4">\n                              <h1 class="mb-0 me-3 h2" style="font-weight: 600;">${e.name}</h1>\n                              <div class="badge-container d-flex align-items-center gap-2">\n                                  ${"HyperChrome"===e.type?'<span class="hyperchrome-badge">HyperChrome</span>':`<span class="badge" style="background-color: ${color};">${e.type}</span>`}\n                                  ${0===e.tradable?'<span class="badge" style="background-color: #dc3545;">Not Tradable</span>':""}\n                              </div>\n                          </div>\n                           ${e.description&&"N/A"!==e.description?`<div class="item-description collapsed">\n                                    ${e.description}\n                                    <div class="read-more-fade"></div>\n                                  </div>\n                                  <button class="read-more-btn">\n                                    <i class="bi bi-chevron-down"></i>Read More\n                                  </button>`:""}\n                          \x3c!-- Values Section --\x3e\n                          ${k}\n\n                          <div class="values-text d-flex flex-column align-items-start mt-3">\n                            <strong class="mb-2">Want to make a value suggestion for ${e.name}?</strong>\n                            <button\n                              onclick="window.open('https://discord.com/invite/jailbreaktrading', '_blank', 'noopener,noreferrer')"\n                              class="discord-button"\n                            >\n                              Visit Jailbreak Trading Core!\n                            </button>\n                          </div>\n                      </div>\n                  </div>\n              </div>\n            </div>\n        \n            ${H}`,setTimeout((()=>{initializeDescriptionToggle()}),100),window.commentsManagerInstance)if(window.commentsManagerInstance.clearComments(),e&&e.id&&e.type)window.commentsManagerInstance.type=e.type.toLowerCase(),window.commentsManagerInstance.itemId=e.id,window.commentsManagerInstance.itemName=e.name,window.commentsManagerInstance.loadComments();else{const e=document.querySelector("comment-container");e&&(e.style.display="none")}else if(e&&e.id&&e.type)window.commentsManagerInstance=new CommentsManager(e.type.toLowerCase(),e.id,e.name),window.commentsManagerInstance.loadComments();else{const e=document.querySelector("comment-container");e&&(e.style.display="none")}g&&setTimeout((()=>{const t=Highcharts.stockChart("combinedChart",{chart:{type:"spline",backgroundColor:"transparent",style:{fontFamily:'-apple-system, system-ui, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif'}},rangeSelector:{buttons:[{type:"week",count:1,text:"1w"},{type:"month",count:1,text:"1m"},{type:"month",count:6,text:"6m"},{type:"year",count:1,text:"1y"},{type:"all",text:"All"}],selected:1,buttonTheme:{fill:"#124e66",stroke:"#124e66",style:{color:"#d3d9d4"},states:{hover:{fill:"#1d7da3",stroke:"#1d7da3",style:{color:"#ffffff"}},select:{fill:"#1d7da3",stroke:"#1d7da3",style:{color:"#ffffff"}},disabled:{fill:"#2e3944",stroke:"#2e3944",style:{color:"#748d92",cursor:"not-allowed"}}}},inputStyle:{color:"#d3d9d4",backgroundColor:"#2e3944"},labelStyle:{color:"#d3d9d4"}},navigator:{enabled:!1,series:[{color:"#1d7da3",lineWidth:2,fillOpacity:.3,type:"areaspline"},{color:"#748d92",lineWidth:2,fillOpacity:.3,type:"areaspline"}],height:60,maskFill:"rgba(46, 57, 68, 0.6)",maskInside:!0,outlineColor:"#2e3944",outlineWidth:1,xAxis:{labels:{style:{color:"#d3d9d4"}},gridLineColor:"rgba(211, 217, 212, 0.1)"},handles:{backgroundColor:"#2e3944",borderColor:"#1d7da3",borderWidth:2,height:20,width:10}},scrollbar:{enabled:!1},title:{text:`Value History for ${e.name}`,style:{color:"#D3D9D4",fontWeight:"bold",fontFamily:'"Luckiest Guy", cursive',letterSpacing:"1px",fontSize:window.innerWidth<768?"18px":"24px"}},credits:{enabled:!1},tooltip:{shared:!0,split:!1,backgroundColor:"#2e3944",borderColor:"#124e66",borderRadius:8,style:{color:"#d3d9d4"},formatter:function(){let e=`<b>${Highcharts.dateFormat("%b %d, %Y %l:%M %p",this.x)}</b><br/>`;return this.points.forEach((function(t){e+=`<span style="color: ${t.series.color}">${t.series.name}: ${t.y.toLocaleString()}</span><br/>`})),e}},xAxis:{type:"datetime",labels:{style:{color:"#D3D9D4"},format:"{value:%b %d}"},lineColor:"#2E3944",tickColor:"#2E3944",gridLineColor:"rgba(211, 217, 212, 0.1)",gridLineWidth:1},yAxis:{opposite:!1,title:{text:"Value",style:{color:"#D3D9D4"}},min:0,tickAmount:10,labels:{style:{color:"#D3D9D4"},formatter:function(){return this.value>=1e6?(this.value/1e6).toFixed(1)+"M":this.value>=1e3?(this.value/1e3).toFixed(1)+"K":this.value}},gridLineColor:"rgba(211, 217, 212, 0.1)",gridLineWidth:1,startOnTick:!0,endOnTick:!0,alignTicks:!0},legend:{enabled:!0,itemStyle:{color:"#D3D9D4"},itemHoverStyle:{color:"#ffffff"}},plotOptions:{series:{showInNavigator:!0,animation:{duration:1e3},marker:{enabled:!1,states:{hover:{enabled:!0}}},dataLabels:{style:{backgroundColor:"#212a31"}}}},labels:{style:{backgroundColor:"#212a31"}},loading:{labelStyle:{backgroundColor:"transparent",color:"#D3D9D4",fontFamily:'"Luckiest Guy", cursive',fontSize:"18px"},style:{backgroundColor:"rgba(33, 42, 49, 0.8)"}},series:[{name:"Cash Value",data:[],color:"rgb(29, 125, 163)",lineWidth:2},{name:"Duped Value",data:[],color:"#748D92",lineWidth:2}],exporting:{buttons:{contextButton:{menuItems:["viewFullscreen"]}}}}),n=document.createElement("style");n.textContent="\n          #fullscreen svg {\n            margin-right: 6px;\n            vertical-align: -2px;\n          }\n        ",document.head.appendChild(n),t.showLoading("Loading data...");document.getElementById("fullscreen").addEventListener("click",(function(){const e=!t.fullscreen.isOpen;t.fullscreen.toggle(),setTimeout((()=>{t.update({navigator:{enabled:e}}),e&&t.navigator.series[0].setData(t.series[0].options.data)}),100)})),Highcharts.addEvent(t,"fullscreenExit",(function(){t.update({navigator:{enabled:!1}})})),document.addEventListener("fullscreenchange",(function(){document.fullscreenElement||t.update({navigator:{enabled:!1}})})),fetch(`https://api3.jailbreakchangelogs.xyz/item/history?id=${e.id}`).then((e=>e.json())).then((e=>{const n=e.map((e=>({x:1e3*e.date,y:a(e.cash_value)}))),o=e.map((e=>({x:1e3*e.date,y:a(e.duped_value)})));if(t.series[0].setData(n),t.series[1].setData(o.some((e=>e.y>0))?o:[]),n.length>0){const e=n[0].x,a=n[n.length-1].x-e,o={week:6048e5,month:2592e6,sixMonth:15552e6,year:31536e6};t.rangeSelector.buttons.forEach(((e,t)=>{let n=!1;switch(t){case 0:n=a<o.week;break;case 1:n=a<o.month;break;case 2:n=a<o.sixMonth;break;case 3:n=a<o.year}n&&(e.setState(2),e.element.style.cursor="not-allowed")}))}t.hideLoading()})).catch((e=>{console.error("Error fetching data:",e),t.showLoading("Error loading data")})),window.addEventListener("resize",(()=>{t.setTitle({text:t.title.textStr,style:{...t.title.style,fontSize:window.innerWidth<768?"18px":"24px"}})}))}),100);y(e)}(d)}catch(t){console.error("Error fetching data:",t),function(t){e();const n=window.location.pathname.split("/"),a=n[2],o=n.pop(),i=decodeURIComponent(o).trim().replace(/\s+/g," "),s=document.querySelector(".comment-container");s&&(s.style.display="none");window.commentsManagerInstance&&(window.commentsManagerInstance=null);const r=document.getElementById("item-container"),l=VALID_SORTS.some((e=>e.toLowerCase()===a.toLowerCase())),c=document.querySelector(".similar-items-section");c&&(c.style.display="none");r.innerHTML=`\n    <div class="container mt-5">\n      <div class="alert alert-danger text-center" role="alert">\n        <div class="mb-3">\n          <i class="bi bi-exclamation-circle-fill" style="font-size: 2rem;"></i>\n        </div>\n        <h4 class="alert-heading mb-3">Item Not Found</h4>\n        <p>${l?`"${i}" is not a valid ${a}`:`Invalid category "${a}"`}</p>\n        <div class="mt-4 d-flex flex-column flex-md-row gap-3 justify-content-center">\n          ${l?`<a href="/values?sort=${a}s&valueSort=cash-desc" \n                class="btn btn-outline-primary"\n                style="border-color: var(--accent-color-light); color: var(--accent-color-light);"\n                onmouseover="this.style.backgroundColor='var(--accent-color)'; this.style.color='var(--text-primary)';"\n                onmouseout="this.style.backgroundColor='transparent'; this.style.color='var(--accent-color-light)';">\n              <i class="bi bi-grid me-2"></i>Browse Other ${a.charAt(0).toUpperCase()+a.slice(1)}s\n            </a>`:""}\n          <a href="/values" \n             class="btn btn-outline-primary"\n             style="border-color: var(--accent-color-light); color: var(--accent-color-light);"\n             onmouseover="this.style.backgroundColor='var(--accent-color)'; this.style.color='var(--text-primary)';"\n             onmouseout="this.style.backgroundColor='transparent'; this.style.color='var(--accent-color-light)';">\n            <i class="bi bi-arrow-left me-2"></i>Back to All Items\n          </a>\n        </div>\n      </div>\n      ${l?'\n        \x3c!-- Similar Items Section --\x3e\n        <div class="mt-4">\n          <h5 class="text-center mb-4">\n            <i class="bi bi-search me-2"></i>Did you mean?\n          </h5>\n          <div id="similar-items" class="row g-3">\n            <style>\n              @media (max-width: 768px) {\n                .card-title {\n                  font-size: 0.9rem !important;\n                }\n                .card-overlay h6 {\n                  font-size: 0.85rem !important;\n                }\n                .card-overlay small {\n                  font-size: 0.75rem !important;\n                }\n              }\n            </style>\n            <div class="col-12 text-center text-muted">\n              <div class="spinner-border spinner-border-sm me-2" role="status">\n                <span class="visually-hidden">Loading...</span>\n              </div>\n              Looking for similar items...\n            </div>\n          </div>\n        </div>\n      ':""}\n    </div>`,l&&loadSimilarItemsByName(i)}(t.message)}finally{e()}}()}));